-- Users (extended from auth)
users
  id                uuid primary key
  email             text unique
  role              text check(role in ('student', 'teacher', 'admin'))
  full_name         text
  profile_picture   text
  created_at        timestamptz default now()

-- Classes / Groups (teacher owns)
classes
  id                uuid primary key
  teacher_id        uuid references users(id)
  name              text           -- e.g. "Grade 10 Mathematics"
  subject           text
  description       text
  invite_code       text unique    -- optional 6-8 char code for students to join
  created_at        timestamptz

-- Class Membership (many-to-many)
class_members
  class_id          uuid references classes
  user_id           uuid references users
  joined_at         timestamptz
  primary key (class_id, user_id)

-- Tasks / Assignments
tasks
  id                uuid primary key
  class_id          uuid references classes
  title             text
  description       text
  due_date          date
  points_possible   integer default 100
  created_at        timestamptz

-- Student Submissions
submissions
  id                uuid primary key
  task_id           uuid references tasks
  student_id        uuid references users
  content           text           -- or JSON for rich answers / file links
  submitted_at      timestamptz
  score             integer        -- out of points_possible
  feedback          text
  status            text           -- pending, submitted, graded

-- Messages / Communication (simple threaded)
messages
  id                uuid primary key
  sender_id         uuid references users
  receiver_id       uuid references users     -- or null if class-wide announcement
  class_id          uuid references classes   -- optional
  content           text
  created_at        timestamptz
  read_at           timestamptz               -- per recipient if needed
